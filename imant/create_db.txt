select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
{'name': u'folders'}
Col ('relname',)
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
{'name': u'users'}
Col ('relname',)
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
{'name': u'labels'}
Col ('relname',)
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
{'name': u'participants'}
Col ('relname',)
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
{'name': u'studyparticipants'}
Col ('relname',)
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
{'name': u'images'}
Col ('relname',)
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
{'name': u'useraccess'}
Col ('relname',)
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
{'name': u'studies'}
Col ('relname',)
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
{'name': u'events'}
Col ('relname',)
select relname from pg_class c join pg_namespace n on n.oid=c.relnamespace where pg_catalog.pg_table_is_visible(c.oid) and relname=%(name)s
{'name': u'schemas'}
Col ('relname',)

CREATE TABLE users (
	user_id SERIAL NOT NULL, 
	username VARCHAR(50), 
	password VARCHAR(50), 
	PRIMARY KEY (user_id), 
	UNIQUE (username)
)


{}
COMMIT

CREATE TABLE participants (
	participant_id SERIAL NOT NULL, 
	name VARCHAR(50) NOT NULL, 
	PRIMARY KEY (participant_id)
)


{}
COMMIT

CREATE TABLE studies (
	study_id SERIAL NOT NULL, 
	name VARCHAR(256), 
	PRIMARY KEY (study_id)
)


{}
COMMIT

CREATE TABLE schemas (
	schema_id SERIAL NOT NULL, 
	name VARCHAR(50), 
	PRIMARY KEY (schema_id)
)


{}
COMMIT

CREATE TABLE folders (
	id SERIAL NOT NULL, 
	parent_id INTEGER, 
	name VARCHAR(255) NOT NULL, 
	schema_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(parent_id) REFERENCES folders (id), 
	FOREIGN KEY(schema_id) REFERENCES schemas (schema_id)
)


{}
COMMIT

CREATE TABLE studyparticipants (
	study_id INTEGER, 
	participant_id INTEGER, 
	UNIQUE (study_id, participant_id), 
	FOREIGN KEY(study_id) REFERENCES studies (study_id), 
	FOREIGN KEY(participant_id) REFERENCES participants (participant_id)
)


{}
COMMIT

CREATE TABLE useraccess (
	user_id INTEGER, 
	study_id INTEGER, 
	access_level INTEGER NOT NULL, 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(study_id) REFERENCES studies (study_id)
)


{}
COMMIT

CREATE TABLE events (
	event_id SERIAL NOT NULL, 
	participant_id INTEGER NOT NULL, 
	start_time TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	end_time TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	comment TEXT, 
	number_times_viewed INTEGER, 
	PRIMARY KEY (event_id), 
	FOREIGN KEY(participant_id) REFERENCES participants (participant_id)
)


{}
COMMIT

CREATE TABLE labels (
	label_id SERIAL NOT NULL, 
	schema_id INTEGER NOT NULL, 
	folder_id INTEGER, 
	name VARCHAR(256), 
	color VARCHAR(50), 
	PRIMARY KEY (label_id), 
	FOREIGN KEY(schema_id) REFERENCES schemas (schema_id), 
	FOREIGN KEY(folder_id) REFERENCES folders (id)
)


{}
COMMIT

CREATE TABLE images (
	image_id SERIAL NOT NULL, 
	image_time TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
	participant_id INTEGER NOT NULL, 
	event_id INTEGER, 
	full_url VARCHAR(256), 
	medium_url VARCHAR(256), 
	thumbnail_url VARCHAR(256), 
	PRIMARY KEY (image_id), 
	FOREIGN KEY(participant_id) REFERENCES participants (participant_id), 
	FOREIGN KEY(event_id) REFERENCES events (event_id)
)


{}
COMMIT
